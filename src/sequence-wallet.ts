import type { ConnectOptions } from '@0xsequence/provider';
import { type Chain, type Wallet } from '@rainbow-me/rainbowkit';

import { SequenceConnector } from './sequence-connector';

export interface MyWalletOptions {
  chains: Chain[];
  connect?: ConnectOptions
}

export const sequenceWallet = ({ chains, connect }: MyWalletOptions): Wallet => ({
  id: 'sequence',
  name: 'Sequence',
  iconUrl: 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICBzdHlsZT0iZmlsbDpub25lIgogICBpZD0ic3ZnMTMxNiIKICAgdmVyc2lvbj0iMS4xIgogICB2aWV3Qm94PSIwIDAgMzk2IDM5NiIKICAgaGVpZ2h0PSIzOTYiCiAgIHdpZHRoPSIzOTYiPgogIDxnCiAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMCwzOCkiCiAgICAgaWQ9ImcxMjU2IgogICAgIGNsaXAtcGF0aD0idXJsKCNjbGlwMF81XzEzMSkiPgogICAgPGcKICAgICAgIGlkPSJnMTI1NCIKICAgICAgIGNsaXAtcGF0aD0idXJsKCNjbGlwMV81XzEzMSkiPgogICAgICA8cGF0aAogICAgICAgICBzdHlsZT0iZmlsbDojMTExMTExIgogICAgICAgICBpZD0icGF0aDEyMzIiCiAgICAgICAgIGQ9Ik0gMCw2Ny41MDQ5IFYgMjUwLjE2NSBjIDAsMzcuMjgyIDMwLjE0MDIsNjcuNTA1IDY3LjMyLDY3LjUwNSBoIDI2MS4zNiBjIDM3LjE4LDAgNjcuMzIsLTMwLjIyMyA2Ny4zMiwtNjcuNTA1IFYgNjcuNTA0OSBDIDM5NiwzMC4yMjMgMzY1Ljg2LDAgMzI4LjY4LDAgSCA2Ny4zMiBDIDMwLjE0MDIsMCAwLDMwLjIyMyAwLDY3LjUwNDkgWiIgLz4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6dXJsKCNwYWludDBfbGluZWFyXzVfMTMxKSIKICAgICAgICAgaWQ9InBhdGgxMjM0IgogICAgICAgICBkPSJNIDAsNjcuNTA0OSBWIDI1MC4xNjUgYyAwLDM3LjI4MiAzMC4xNDAyLDY3LjUwNSA2Ny4zMiw2Ny41MDUgaCAyNjEuMzYgYyAzNy4xOCwwIDY3LjMyLC0zMC4yMjMgNjcuMzIsLTY3LjUwNSBWIDY3LjUwNDkgQyAzOTYsMzAuMjIzIDM2NS44NiwwIDMyOC42OCwwIEggNjcuMzIgQyAzMC4xNDAyLDAgMCwzMC4yMjMgMCw2Ny41MDQ5IFoiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOnVybCgjcGFpbnQxX2xpbmVhcl81XzEzMSkiCiAgICAgICAgIGlkPSJwYXRoMTIzNiIKICAgICAgICAgZD0ibSA5OC45OTk5LDc5LjQxNzYgYyAwLC0xMC45NjUzIC04Ljg2NDgsLTE5Ljg1NDQgLTE5LjgsLTE5Ljg1NDQgLTEwLjkzNTIsMCAtMTkuOCw4Ljg4OTEgLTE5LjgsMTkuODU0NCAwLDEwLjk2NTIgOC44NjQ4LDE5Ljg1NDQgMTkuOCwxOS44NTQ0IDEwLjkzNTIsMCAxOS44LC04Ljg4OTIgMTkuOCwtMTkuODU0NCB6IiAvPgogICAgICA8cGF0aAogICAgICAgICBzdHlsZT0iZmlsbDp1cmwoI3BhaW50Ml9saW5lYXJfNV8xMzEpIgogICAgICAgICBpZD0icGF0aDEyMzgiCiAgICAgICAgIGQ9Im0gOTguOTk5OSw3OS40MTc2IGMgMCwtMTAuOTY1MyAtOC44NjQ4LC0xOS44NTQ0IC0xOS44LC0xOS44NTQ0IC0xMC45MzUyLDAgLTE5LjgsOC44ODkxIC0xOS44LDE5Ljg1NDQgMCwxMC45NjUyIDguODY0OCwxOS44NTQ0IDE5LjgsMTkuODU0NCAxMC45MzUyLDAgMTkuOCwtOC44ODkyIDE5LjgsLTE5Ljg1NDQgeiIgLz4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6dXJsKCNwYWludDNfbGluZWFyXzVfMTMxKSIKICAgICAgICAgaWQ9InBhdGgxMjQwIgogICAgICAgICBkPSJtIDk4Ljk5OTksNzkuNDE3NiBjIDAsLTEwLjk2NTMgLTguODY0OCwtMTkuODU0NCAtMTkuOCwtMTkuODU0NCAtMTAuOTM1MiwwIC0xOS44LDguODg5MSAtMTkuOCwxOS44NTQ0IDAsMTAuOTY1MiA4Ljg2NDgsMTkuODU0NCAxOS44LDE5Ljg1NDQgMTAuOTM1MiwwIDE5LjgsLTguODg5MiAxOS44LC0xOS44NTQ0IHoiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOnVybCgjcGFpbnQ0X2xpbmVhcl81XzEzMSkiCiAgICAgICAgIGlkPSJwYXRoMTI0MiIKICAgICAgICAgZD0ibSA5OC45OTk5LDIzOC4xMjYgYyAwLC0xMC45NjUgLTguODY0OCwtMTkuODU0IC0xOS44LC0xOS44NTQgLTEwLjkzNTIsMCAtMTkuOCw4Ljg4OSAtMTkuOCwxOS44NTQgMCwxMC45NjYgOC44NjQ4LDE5Ljg1NSAxOS44LDE5Ljg1NSAxMC45MzUyLDAgMTkuOCwtOC44ODkgMTkuOCwtMTkuODU1IHoiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOnVybCgjcGFpbnQ1X2xpbmVhcl81XzEzMSkiCiAgICAgICAgIGlkPSJwYXRoMTI0NCIKICAgICAgICAgZD0ibSAzMzYuNiwxNTguODM1IGMgMCwtMTAuOTY1IC04Ljg2NSwtMTkuODU0IC0xOS44LC0xOS44NTQgLTEwLjkzNSwwIC0xOS44LDguODg5IC0xOS44LDE5Ljg1NCAwLDEwLjk2NSA4Ljg2NSwxOS44NTUgMTkuOCwxOS44NTUgMTAuOTM1LDAgMTkuOCwtOC44OSAxOS44LC0xOS44NTUgeiIgLz4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6dXJsKCNwYWludDZfbGluZWFyXzVfMTMxKSIKICAgICAgICAgaWQ9InBhdGgxMjQ2IgogICAgICAgICBkPSJtIDMzNi42LDE1OC44MzUgYyAwLC0xMC45NjUgLTguODY1LC0xOS44NTQgLTE5LjgsLTE5Ljg1NCAtMTAuOTM1LDAgLTE5LjgsOC44ODkgLTE5LjgsMTkuODU0IDAsMTAuOTY1IDguODY1LDE5Ljg1NSAxOS44LDE5Ljg1NSAxMC45MzUsMCAxOS44LC04Ljg5IDE5LjgsLTE5Ljg1NSB6IiAvPgogICAgICA8cGF0aAogICAgICAgICBzdHlsZT0iZmlsbDp1cmwoI3BhaW50N19saW5lYXJfNV8xMzEpIgogICAgICAgICBpZD0icGF0aDEyNDgiCiAgICAgICAgIGQ9Ik0gMzE2LjgsNTkuNTYzMiBIIDE1OC40IGMgLTEwLjkzNSwwIC0xOS44LDguODg5MSAtMTkuOCwxOS44NTQ0IDAsMTAuOTY1MiA4Ljg2NSwxOS44NTQ0IDE5LjgsMTkuODU0NCBoIDE1OC40IGMgMTAuOTM1LDAgMTkuOCwtOC44ODkyIDE5LjgsLTE5Ljg1NDQgMCwtMTAuOTY1MyAtOC44NjUsLTE5Ljg1NDQgLTE5LjgsLTE5Ljg1NDQgeiIgLz4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6dXJsKCNwYWludDhfbGluZWFyXzVfMTMxKSIKICAgICAgICAgaWQ9InBhdGgxMjUwIgogICAgICAgICBkPSJNIDMxNi44LDIxOC4yNzIgSCAxNTguNCBjIC0xMC45MzUsMCAtMTkuOCw4Ljg4OSAtMTkuOCwxOS44NTQgMCwxMC45NjYgOC44NjUsMTkuODU1IDE5LjgsMTkuODU1IGggMTU4LjQgYyAxMC45MzUsMCAxOS44LC04Ljg4OSAxOS44LC0xOS44NTUgMCwtMTAuOTY1IC04Ljg2NSwtMTkuODU0IC0xOS44LC0xOS44NTQgeiIgLz4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6dXJsKCNwYWludDlfbGluZWFyXzVfMTMxKSIKICAgICAgICAgaWQ9InBhdGgxMjUyIgogICAgICAgICBkPSJNIDIzNy42LDEzOC45ODEgSCA3OS4yIGMgLTEwLjkzNTIsMCAtMTkuOCw4Ljg4OSAtMTkuOCwxOS44NTQgMCwxMC45NjUgOC44NjQ4LDE5Ljg1NSAxOS44LDE5Ljg1NSBoIDE1OC40IGMgMTAuOTM1LDAgMTkuOCwtOC44OSAxOS44LC0xOS44NTUgMCwtMTAuOTY1IC04Ljg2NSwtMTkuODU0IC0xOS44LC0xOS44NTQgeiIgLz4KICAgIDwvZz4KICA8L2c+CiAgPGRlZnMKICAgICBpZD0iZGVmczEzMTQiPgogICAgPGxpbmVhckdyYWRpZW50CiAgICAgICBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIKICAgICAgIHkyPSIzMTgiCiAgICAgICB4Mj0iMTk4IgogICAgICAgeTE9IjQuMDU4NTQwMWUtMDUiCiAgICAgICB4MT0iMTk4IgogICAgICAgaWQ9InBhaW50MF9saW5lYXJfNV8xMzEiPgogICAgICA8c3RvcAogICAgICAgICBpZD0ic3RvcDEyNTgiCiAgICAgICAgIHN0b3AtY29sb3I9IiMxRDI3M0QiIC8+CiAgICAgIDxzdG9wCiAgICAgICAgIGlkPSJzdG9wMTI2MCIKICAgICAgICAgc3RvcC1jb2xvcj0iIzBEMEYxMyIKICAgICAgICAgb2Zmc2V0PSIxIiAvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudAogICAgICAgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiCiAgICAgICB5Mj0iNjMiCiAgICAgICB4Mj0iOTIuNSIKICAgICAgIHkxPSI5OSIKICAgICAgIHgxPSI2NS41IgogICAgICAgaWQ9InBhaW50MV9saW5lYXJfNV8xMzEiPgogICAgICA8c3RvcAogICAgICAgICBpZD0ic3RvcDEyNjMiCiAgICAgICAgIHN0b3AtY29sb3I9IiM0NDYyRkUiIC8+CiAgICAgIDxzdG9wCiAgICAgICAgIGlkPSJzdG9wMTI2NSIKICAgICAgICAgc3RvcC1jb2xvcj0iIzdENjlGQSIKICAgICAgICAgb2Zmc2V0PSIxIiAvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudAogICAgICAgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiCiAgICAgICB5Mj0iOTcuNTkxMTAzIgogICAgICAgeDI9Ijk2LjEzNzcwMyIKICAgICAgIHkxPSI5OS4yOTExOTkiCiAgICAgICB4MT0iNjIuODc5OTAyIgogICAgICAgaWQ9InBhaW50Ml9saW5lYXJfNV8xMzEiPgogICAgICA8c3RvcAogICAgICAgICBpZD0ic3RvcDEyNjgiCiAgICAgICAgIHN0b3AtY29sb3I9IiMzNzU3RkQiIC8+CiAgICAgIDxzdG9wCiAgICAgICAgIGlkPSJzdG9wMTI3MCIKICAgICAgICAgc3RvcC1jb2xvcj0iIzY5ODBGQSIKICAgICAgICAgb2Zmc2V0PSIxIiAvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudAogICAgICAgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiCiAgICAgICB5Mj0iOTcuNTkxMTAzIgogICAgICAgeDI9Ijk2LjEzNzcwMyIKICAgICAgIHkxPSI5OS4yOTExOTkiCiAgICAgICB4MT0iNjIuODc5OTAyIgogICAgICAgaWQ9InBhaW50M19saW5lYXJfNV8xMzEiPgogICAgICA8c3RvcAogICAgICAgICBpZD0ic3RvcDEyNzMiCiAgICAgICAgIHN0b3AtY29sb3I9IiMyNDQ3RkYiIC8+CiAgICAgIDxzdG9wCiAgICAgICAgIGlkPSJzdG9wMTI3NSIKICAgICAgICAgc3RvcC1jb2xvcj0iIzY5ODBGQSIKICAgICAgICAgb2Zmc2V0PSIxIiAvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudAogICAgICAgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiCiAgICAgICB5Mj0iMjIzLjUiCiAgICAgICB4Mj0iOTEuNSIKICAgICAgIHkxPSIyNTEuNSIKICAgICAgIHgxPSI2NSIKICAgICAgIGlkPSJwYWludDRfbGluZWFyXzVfMTMxIj4KICAgICAgPHN0b3AKICAgICAgICAgaWQ9InN0b3AxMjc4IgogICAgICAgICBzdG9wLWNvbG9yPSIjQkMzRUU2IiAvPgogICAgICA8c3RvcAogICAgICAgICBpZD0ic3RvcDEyODAiCiAgICAgICAgIHN0b3AtY29sb3I9IiNEOTcyRjEiCiAgICAgICAgIG9mZnNldD0iMSIgLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8bGluZWFyR3JhZGllbnQKICAgICAgIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIgogICAgICAgeTI9IjE0NiIKICAgICAgIHgyPSIzMjkuNSIKICAgICAgIHkxPSIxNzIiCiAgICAgICB4MT0iMzA1IgogICAgICAgaWQ9InBhaW50NV9saW5lYXJfNV8xMzEiPgogICAgICA8c3RvcAogICAgICAgICBpZD0ic3RvcDEyODMiCiAgICAgICAgIHN0b3AtY29sb3I9IiMyOUJERkYiIC8+CiAgICAgIDxzdG9wCiAgICAgICAgIGlkPSJzdG9wMTI4NSIKICAgICAgICAgc3RvcC1jb2xvcj0iIzk2RTdGQiIKICAgICAgICAgb2Zmc2V0PSIxIiAvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudAogICAgICAgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiCiAgICAgICB5Mj0iMTc2Ljc3MiIKICAgICAgIHgyPSIzMzQuNTY2OTkiCiAgICAgICB5MT0iMTc4LjQxOCIKICAgICAgIHgxPSIzMDAuMTc5OTkiCiAgICAgICBpZD0icGFpbnQ2X2xpbmVhcl81XzEzMSI+CiAgICAgIDxzdG9wCiAgICAgICAgIGlkPSJzdG9wMTI4OCIKICAgICAgICAgc3RvcC1jb2xvcj0iIzIzQkJGRiIgLz4KICAgICAgPHN0b3AKICAgICAgICAgaWQ9InN0b3AxMjkwIgogICAgICAgICBzdG9wLWNvbG9yPSIjODVFN0ZGIgogICAgICAgICBvZmZzZXQ9IjEiIC8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGxpbmVhckdyYWRpZW50CiAgICAgICBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIKICAgICAgIHkyPSI2MCIKICAgICAgIHgyPSIzMTcuNSIKICAgICAgIHkxPSI5OSIKICAgICAgIHgxPSIxNTQuNSIKICAgICAgIGlkPSJwYWludDdfbGluZWFyXzVfMTMxIj4KICAgICAgPHN0b3AKICAgICAgICAgaWQ9InN0b3AxMjkzIgogICAgICAgICBzdG9wLWNvbG9yPSIjMjNCQkZGIiAvPgogICAgICA8c3RvcAogICAgICAgICBpZD0ic3RvcDEyOTUiCiAgICAgICAgIHN0b3AtY29sb3I9IiM4NUU3RkYiCiAgICAgICAgIG9mZnNldD0iMSIgLz4KICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICA8bGluZWFyR3JhZGllbnQKICAgICAgIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIgogICAgICAgeTI9IjIxOCIKICAgICAgIHgyPSIzMTIuNSIKICAgICAgIHkxPSIyNTgiCiAgICAgICB4MT0iMTU2IgogICAgICAgaWQ9InBhaW50OF9saW5lYXJfNV8xMzEiPgogICAgICA8c3RvcAogICAgICAgICBpZD0ic3RvcDEyOTgiCiAgICAgICAgIHN0b3AtY29sb3I9IiMyNDQ3RkYiIC8+CiAgICAgIDxzdG9wCiAgICAgICAgIGlkPSJzdG9wMTMwMCIKICAgICAgICAgc3RvcC1jb2xvcj0iIzY5ODBGQSIKICAgICAgICAgb2Zmc2V0PSIxIiAvPgogICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDxsaW5lYXJHcmFkaWVudAogICAgICAgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiCiAgICAgICB5Mj0iMTM5IgogICAgICAgeDI9IjIzNS41IgogICAgICAgeTE9IjE3OSIKICAgICAgIHgxPSI4Ni4wMDAwOTkiCiAgICAgICBpZD0icGFpbnQ5X2xpbmVhcl81XzEzMSI+CiAgICAgIDxzdG9wCiAgICAgICAgIGlkPSJzdG9wMTMwMyIKICAgICAgICAgc3RvcC1jb2xvcj0iIzY2MzRGRiIgLz4KICAgICAgPHN0b3AKICAgICAgICAgaWQ9InN0b3AxMzA1IgogICAgICAgICBzdG9wLWNvbG9yPSIjOUM2REZGIgogICAgICAgICBvZmZzZXQ9IjEiIC8+CiAgICA8L2xpbmVhckdyYWRpZW50PgogICAgPGNsaXBQYXRoCiAgICAgICBpZD0iY2xpcDBfNV8xMzEiPgogICAgICA8cmVjdAogICAgICAgICBzdHlsZT0iZmlsbDojZmZmZmZmIgogICAgICAgICB5PSIwIgogICAgICAgICB4PSIwIgogICAgICAgICBpZD0icmVjdDEzMDgiCiAgICAgICAgIGhlaWdodD0iMzE3LjY3MDAxIgogICAgICAgICB3aWR0aD0iMzk2IiAvPgogICAgPC9jbGlwUGF0aD4KICAgIDxjbGlwUGF0aAogICAgICAgaWQ9ImNsaXAxXzVfMTMxIj4KICAgICAgPHJlY3QKICAgICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZiIKICAgICAgICAgeT0iMCIKICAgICAgICAgeD0iMCIKICAgICAgICAgaWQ9InJlY3QxMzExIgogICAgICAgICBoZWlnaHQ9IjMxNy42NzAwMSIKICAgICAgICAgd2lkdGg9IjM5NiIgLz4KICAgIDwvY2xpcFBhdGg+CiAgPC9kZWZzPgo8L3N2Zz4=',
  iconBackground: '#1c263a',
  downloadUrls: {
    browserExtension: 'https://sequence.app',
  },
  createConnector: () => {
    const connector = new SequenceConnector({
      chains,
      options: {
        connect
      },
    });

    return {
      connector,
      mobile: {
        getUri: async () => {
          try {
            await connector.connect();
          } catch (e) {
            console.error('Failed to connect');
          }
          return '';
        },
      },
      desktop: {
        getUri: async () => {
          try {
            await connector.connect();
          } catch (e) {
            console.error('Failed to connect');
          }
          return '';
        },
      },
    };
  },
});
